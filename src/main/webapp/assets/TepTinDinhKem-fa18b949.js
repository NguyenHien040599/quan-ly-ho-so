import{q as c,f as Q,s as W,I as Y,o as Z,r as ee,h as d,B as w,d as o,w as a,k as ae,j as s,A as t,y as S,x as G,i as f,K as p,L as m,z as u,M as L,J as oe,F as le,E as ne,G as te}from"./index-5f8c8cac.js";import{$ as se}from"./jquery-da988d60.js";import{u as ie}from"./hosodvc-33e93a11.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";import{V as P,a as E}from"./VRow-ba94faca.js";import{V as F}from"./VTooltip-c4737b4a.js";import{V as b,a as K,b as de}from"./VCard-7629d27a.js";import{V as I,a as B,b as $,c as N}from"./VToolbarItems-c6275d7e.js";import{V as ce}from"./VForm-2b087bea.js";const h=y=>(ne("data-v-ede87703"),y=y(),te(),y),re={class:"align-left"},pe={key:0,style:{color:"red"}},he=h(()=>s("span",{style:{"font-size":"14px","text-transform":"none"}},"Xóa",-1)),fe={class:"align-center",width:"350"},Te=["onClick"],_e={class:"ml-2",style:{"font-size":"14px","text-decoration":"underline",color:"#1E7D30"}},me=h(()=>s("span",null,"Tải xuống",-1)),ye=h(()=>s("span",null,"Xóa",-1)),ge=h(()=>s("span",{style:{"font-size":"14px","text-transform":"none"}},"Tải lên tệp",-1)),ve=h(()=>s("div",{class:"sub-header-content"}," Tên giấy tờ ",-1)),De=h(()=>s("div",{class:"triangle-header"},null,-1)),xe=h(()=>s("div",{class:"sub-header-content"}," Tệp tin đính kèm ",-1)),ke=h(()=>s("div",{class:"triangle-header"},null,-1)),we=["src"],Se={__name:"TepTinDinhKem",props:{permission:{type:Boolean,default:!1}},setup(y){const g=c("#1E7D30"),r=Q(),V=ie(),j=c(!1),v=c(!1),D=c(!1),C=c(""),x=c(""),M=c(null),T=c(!1),A=W(function(){return r.thongTinHoSo.ThanhPhanHoSo.filter(function(n){return!n.MaThanhPhanHoSo||n.MaThanhPhanHoSo&&n.MaThanhPhanHoSo.MaMuc.split("_")[0]!=="BMDT"})}),H=c(null),U=Y([{sortable:!1,title:"Tên giấy tờ",align:"left",key:"tenGiayTo",class:"td-left"},{sortable:!1,title:"Tệp đính kèm",align:"left",key:"tepDinhKem",class:"td-left"}]),O=function(n,l){H.value=n,document.getElementById("file_upload_tep_dinh_kem").value="",document.getElementById("file_upload_tep_dinh_kem").click()},R=function(){let n=se("#file_upload_tep_dinh_kem")[0].files[0];V.uploadTep(n).then(function(l){console.log(l.resp),r.thongTinHoSo.ThanhPhanHoSo.forEach((i,e)=>{i.MaThanhPhanHoSo.MaMuc===H.value.MaThanhPhanHoSo.MaMuc&&r.$patch(k=>{k.thongTinHoSo.ThanhPhanHoSo[e].TepDuLieu=l.resp})}),console.log("thongTinHoSo",r.thongTinHoSo)}).catch(function(l){console.log(l)})},z=function(n,l){T.value||(T.value=!0,V.taiTep(n).then(function(i){if(T.value=!1,l=="preview")C.value=i,D.value=!0;else{var e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=i,e.download=n.TenTep,e.click()}}).catch(function(i){T.value=!1}))},X=function(){x.value="",v.value=!0},q=function(n,l){console.log("item",n,l),r.SET_SHOWCONFIRM(!0);let i={auth:!1,title:"Xóa giấy tờ",message:"Bạn có chắc chắn muốn xóa giấy tờ này",button:{yes:"Có",no:"Không"},callback:()=>{r.$patch(e=>{e.thongTinHoSo.ThanhPhanHoSo.splice(l+1,1)})}};r.SET_CONFIG_CONFIRM_DIALOG(i)},J=async function(){const{valid:n}=await M.value.validate();if(n){let l={IDGiayTo:"",TenGiayTo:x.value,SoBanGiay:0,HinhThucGiayTo:{MaMuc:"",TenMuc:""},NgayBoSung:null,MaThanhPhanHoSo:null,MaGiayToKetQua:null,DaHuyBoThayThe:!1,TinhTrangSoHoa:1,GiayToCaNhanToChuc:{MaDinhDanh:"",TenGiayTo:""},TepDuLieu:{MaDinhDanh:"",TenTep:"",DinhDangTep:"",KichThuocTep:0,DuongDanURL:"",Ext:""},GiayToLuuTruSo:{MaDinhDanh:"",TenGiayTo:""},DuLieuDienTu:{MaDinhDanh:""}};console.log("tphsAdd",l),r.$patch(i=>{i.thongTinHoSo.ThanhPhanHoSo.push(l)})}};return Z(()=>{}),(n,l)=>{const i=ee("v-data-table");return d(),w(le,null,[o(b,{class:"pa-0 thanhphanhoso",style:{"box-shadow":"none !important",width:"100%"}},{default:a(()=>[o(P,{class:"mx-0 my-0 mt-2"},{default:a(()=>[o(i,{headers:U,items:ae(A),"items-per-page":"20","item-value":"PrimKey","hide-default-footer":"",class:"table-base mb-5","no-data":"Không có dữ liệu",loading:j.value,"loading-text":"Đang tải... "},{item:a(({item:e,index:k})=>[s("tr",null,[s("td",re,[t(S(e.raw.TenGiayTo)+" ",1),e.raw.MaThanhPhanHoSo?(d(),w("span",pe,"(*)")):G("",!0),e.raw.MaThanhPhanHoSo?G("",!0):(d(),f(p,{key:1,class:"mx-0 ml-2",size:"small",variant:"outlined",color:"red",onClick:m(_=>q(e.raw,k),["stop"]),height:"28px",width:"50px"},{default:a(()=>[o(u,{size:"14",color:"red"},{default:a(()=>[t("mdi-delete")]),_:1}),he]),_:2},1032,["onClick"]))]),s("td",fe,[e.raw.TepDuLieu.KichThuocTep?(d(),w("div",{key:0,class:"py-1",onClick:_=>z(e.raw.TepDuLieu,"preview")},[e.raw.TepDuLieu.DinhDangTep==="xls"||e.raw.TepDuLieu.DinhDangTep==="xlsx"?(d(),f(u,{key:0,size:"18",color:"green"},{default:a(()=>[t("mdi-file-excel-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="doc"||e.raw.TepDuLieu.DinhDangTep==="docx"?(d(),f(u,{key:1,size:"18",color:"blue"},{default:a(()=>[t("mdi-file-word-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="pdf"?(d(),f(u,{key:2,size:"18",color:"red"},{default:a(()=>[t("mdi-file-pdf-box")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="png"||e.raw.TepDuLieu.DinhDangTep==="jpg"||e.raw.TepDuLieu.DinhDangTep==="jpeg"?(d(),f(u,{key:3,size:"18",color:"blue"},{default:a(()=>[t("mdi-file-image")]),_:1})):(d(),f(u,{key:4,size:"18",color:"#2161b1"},{default:a(()=>[t("mdi-paperclip")]),_:1})),s("a",_e,S(e.raw.TepDuLieu.TenTep)+"."+S(e.raw.TepDuLieu.Ext),1),o(F,{location:"top"},{activator:a(({props:_})=>[o(p,L({icon:"",variant:"flat",size:"small"},_,{class:"mr-2",onClick:m(be=>z(e.raw.TepDuLieu,"download"),["stop"])}),{default:a(()=>[o(u,{size:"18",color:g.value},{default:a(()=>[t("mdi-cloud-download-outline")]),_:1},8,["color"])]),_:2},1040,["onClick"])]),default:a(()=>[me]),_:2},1024),o(F,{location:"top"},{activator:a(({props:_})=>[o(p,L({icon:"",variant:"flat",size:"small"},_,{class:"mr-2"}),{default:a(()=>[o(u,{size:"18",color:"red"},{default:a(()=>[t("mdi-close")]),_:1})]),_:2},1040)]),default:a(()=>[ye]),_:1})],8,Te)):(d(),f(p,{key:1,class:"mx-0",size:"small",variant:"outlined",color:"#1E7D30",onClick:m(_=>O(e.raw,k),["stop"]),height:"32px",width:"120px"},{default:a(()=>[o(u,{size:"22",color:"#1E7D30",class:"mr-2"},{default:a(()=>[t("mdi-cloud-upload-outline")]),_:1}),ge]),_:2},1032,["onClick"]))])])]),_:1},8,["headers","items","loading"]),o(P,{class:"mx-0 my-0",style:{"justify-content":"flex-end"}},{default:a(()=>[o(p,{size:"small",color:"#1E7D30","prepend-icon":"mdi-plus",class:"mx-0",onClick:m(X,["stop"])},{default:a(()=>[t(" Thêm giấy tờ khác ")]),_:1},8,["onClick"])]),_:1})]),_:1}),s("input",{type:"file",id:"file_upload_tep_dinh_kem",multiple:!1,onInput:l[0]||(l[0]=e=>R()),style:{display:"none"}},null,32)]),_:1}),o(N,{"max-width":"900",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),persistent:"",absolute:""},{default:a(()=>[o(b,null,{default:a(()=>[o(I,{dark:"",color:g.value,class:"px-0"},{default:a(()=>[o(E,{class:"sub-header d-flex align-center justify-start py-0 px-0"},{default:a(()=>[ve,De]),_:1}),o(B),o($,null,{default:a(()=>[o(p,{variant:"flat",size:"small",icon:"",color:"#E9FFF2",onClick:l[1]||(l[1]=e=>v.value=!1)},{default:a(()=>[o(u,{size:"20"},{default:a(()=>[t("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["color"]),o(K,{class:"mt-2 px-3"},{default:a(()=>[o(ce,{ref_key:"formGiayToKhac",ref:M,"lazy-validation":"",class:"py-0"},{default:a(()=>[o(oe,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),placeholder:"Nhập tên giấy tờ",dense:"","hide-details":"auto",class:"input-form",clearable:"",required:"",rules:[e=>e!==""&&e!==null&&e!==void 0||"Thông tin bắt buộc"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),o(de,{class:"justify-center pb-3 px-3"},{default:a(()=>[o(p,{size:"small",variant:"elevated",loading:T.value,disabled:T.value,color:g.value,"prepend-icon":"mdi-content-save",onClick:m(J,["stop"])},{default:a(()=>[t(" Đồng ý ")]),_:1},8,["loading","disabled","color","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(N,{"max-width":"1000",modelValue:D.value,"onUpdate:modelValue":l[5]||(l[5]=e=>D.value=e),persistent:""},{default:a(()=>[o(b,null,{default:a(()=>[o(I,{dark:"",color:g.value,class:"px-0"},{default:a(()=>[o(E,{class:"sub-header d-flex align-center justify-start py-0 px-0"},{default:a(()=>[xe,ke]),_:1}),o(B),o($,null,{default:a(()=>[o(p,{variant:"flat",size:"small",icon:"",color:"#E9FFF2",onClick:l[4]||(l[4]=e=>D.value=!1)},{default:a(()=>[o(u,{size:"20"},{default:a(()=>[t("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["color"]),o(K,{class:"my-0 px-0 py-0"},{default:a(()=>[s("iframe",{src:C.value,type:"application/pdf",width:"100%",height:"100%",style:{overflow:"auto","min-height":"600px"},frameborder:"0"},`\r
        `,8,we)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Fe=ue(Se,[["__scopeId","data-v-ede87703"]]);export{Fe as default};
