import{n as p,f as U,s as j,t as A,o as O,r as R,h as i,x as v,d as o,w as e,k as X,j as s,v as t,B as b,I as S,i as c,K as r,L as h,z as d,M as V,J as q,F as J,D as Q,E as W}from"./index-7fb0df29.js";import{$ as Y}from"./jquery-da988d60.js";import{u as Z}from"./hosodvc-d313947c.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as C,a as ae}from"./VRow-6b7fefad.js";import{V as z}from"./VTooltip-5377d49a.js";import{V as M,a as oe,b as le}from"./VCard-94fb6d50.js";import{V as te,a as ne,b as se,c as ie}from"./VToolbarItems-9b9cfd00.js";import{V as de}from"./VForm-d35a6502.js";const f=_=>(Q("data-v-83d9d108"),_=_(),W(),_),ue={class:"align-left"},ce={key:0,style:{color:"red"}},re=f(()=>s("span",{style:{"font-size":"14px","text-transform":"none"}},"Xóa",-1)),pe={class:"align-center",width:"350"},he={class:"ml-2",style:{"font-size":"14px","text-decoration":"underline",color:"#1E7D30"}},fe=f(()=>s("span",null,"Tải xuống",-1)),Te=f(()=>s("span",null,"Xóa",-1)),me=f(()=>s("span",{style:{"font-size":"14px","text-transform":"none"}},"Tải lên tệp",-1)),_e=f(()=>s("div",{class:"sub-header-content"}," Tên giấy tờ ",-1)),ye=f(()=>s("div",{class:"triangle-header"},null,-1)),De={__name:"TepTinDinhKem",props:{permission:{type:Boolean,default:!1}},setup(_){const g=p("#1E7D30"),T=U();Z();const L=p(!1),y=p(!1),D=p(""),x=p(null),k=p(!1),G=j(function(){return T.thongTinHoSo.ThanhPhanHoSo.filter(function(n){return!n.MaThanhPhanHoSo||n.MaThanhPhanHoSo&&n.MaThanhPhanHoSo.MaMuc.split("_")[0]!=="BMDT"})}),H=A([{sortable:!1,title:"Tên giấy tờ",align:"center",key:"tenGiayTo",class:"td-left"},{sortable:!1,title:"Tệp đính kèm",align:"center",key:"tepDinhKem",class:"td-left"}]),K=function(){},w=function(){},E=function(){document.getElementById("file_upload_tep_dinh_kem").value="",document.getElementById("file_upload_tep_dinh_kem").click()},F=function(){let n=this,l=Y("#file_upload_tep_dinh_kem")[0].files;for(let u=0;u<l.length;u++)n.fileUpload.push({name:l[u].name});n.$store.commit("SET_FILEUPLOADYET",!0)},I=function(){D.value="",y.value=!0},B=function(n,l){console.log("item",n,l),T.SET_SHOWCONFIRM(!0);let u={auth:!1,title:"Xóa giấy tờ",message:"Bạn có chắc chắn muốn xóa giấy tờ này",button:{yes:"Có",no:"Không"},callback:()=>{T.$patch(a=>{a.thongTinHoSo.ThanhPhanHoSo.splice(l+1,1)})}};T.SET_CONFIG_CONFIRM_DIALOG(u)},P=async function(){const{valid:n}=await x.value.validate();if(n){let l={IDGiayTo:"",TenGiayTo:D.value,SoBanGiay:0,HinhThucGiayTo:{MaMuc:"",TenMuc:""},NgayBoSung:null,MaThanhPhanHoSo:null,MaGiayToKetQua:null,DaHuyBoThayThe:!1,TinhTrangSoHoa:1,GiayToCaNhanToChuc:{MaDinhDanh:"",TenGiayTo:""},TepDuLieu:{MaDinhDanh:"",TenTep:"",DinhDangTep:"",KichThuocTep:0,DuongDanURL:"",Ext:""},GiayToLuuTruSo:{MaDinhDanh:"",TenGiayTo:""},DuLieuDienTu:{MaDinhDanh:""}};console.log("tphsAdd",l),T.$patch(u=>{u.thongTinHoSo.ThanhPhanHoSo.push(l)})}};return O(()=>{}),(n,l)=>{const u=R("v-data-table");return i(),v(J,null,[o(M,{class:"pa-0 thanhphanhoso",style:{"box-shadow":"none !important",width:"100%"}},{default:e(()=>[o(C,{class:"mx-0 my-0 mt-2"},{default:e(()=>[o(u,{headers:H,items:X(G),"items-per-page":"20","item-value":"PrimKey","hide-default-footer":"",class:"table-base mb-5","no-data":"Không có dữ liệu",loading:L.value,"loading-text":"Đang tải... "},{item:e(({item:a,index:N})=>[s("tr",null,[s("td",ue,[t(b(a.raw.TenGiayTo)+" ",1),a.raw.MaThanhPhanHoSo?(i(),v("span",ce,"(*)")):S("",!0),a.raw.MaThanhPhanHoSo?S("",!0):(i(),c(r,{key:1,class:"mx-0 ml-2",size:"small",variant:"outlined",color:"red",onClick:h(m=>B(a.raw,N),["stop"]),height:"28px",width:"50px"},{default:e(()=>[o(d,{size:"14",color:"red"},{default:e(()=>[t("mdi-delete")]),_:1}),re]),_:2},1032,["onClick"]))]),s("td",pe,[a.raw.TepDuLieu.KichThuocTep?(i(),v("div",{key:0,class:"py-1",onClick:l[0]||(l[0]=m=>K())},[a.raw.TepDuLieu.DinhDangTep==="xls"||a.raw.TepDuLieu.DinhDangTep==="xlsx"?(i(),c(d,{key:0,size:"18",color:"green"},{default:e(()=>[t("mdi-file-excel-outline")]),_:1})):a.raw.TepDuLieu.DinhDangTep==="doc"||a.raw.TepDuLieu.DinhDangTep==="docx"?(i(),c(d,{key:1,size:"18",color:"blue"},{default:e(()=>[t("mdi-file-word-outline")]),_:1})):a.raw.TepDuLieu.DinhDangTep==="pdf"?(i(),c(d,{key:2,size:"18",color:"red"},{default:e(()=>[t("mdi-file-pdf-box")]),_:1})):a.raw.TepDuLieu.DinhDangTep==="png"||a.raw.TepDuLieu.DinhDangTep==="jpg"||a.raw.TepDuLieu.DinhDangTep==="jpeg"?(i(),c(d,{key:3,size:"18",color:"blue"},{default:e(()=>[t("mdi-file-image")]),_:1})):(i(),c(d,{key:4,size:"18",color:"#2161b1"},{default:e(()=>[t("mdi-paperclip")]),_:1})),s("a",he,b(a.raw.TepDuLieu.TenTep),1),o(z,{location:"top"},{activator:e(({props:m})=>[o(r,V({icon:"",variant:"flat",size:"small"},m,{class:"mr-2",onClick:h($=>w(a.raw.TepDuLieu),["stop"])}),{default:e(()=>[o(d,{size:"18",color:g.value},{default:e(()=>[t("mdi-cloud-download-outline")]),_:1},8,["color"])]),_:2},1040,["onClick"])]),default:e(()=>[fe]),_:2},1024),o(z,{location:"top"},{activator:e(({props:m})=>[o(r,V({icon:"",variant:"flat",size:"small"},m,{class:"mr-2",onClick:h($=>w(a.raw.TepDuLieu),["stop"])}),{default:e(()=>[o(d,{size:"18",color:"red"},{default:e(()=>[t("mdi-close")]),_:1})]),_:2},1040,["onClick"])]),default:e(()=>[Te]),_:2},1024)])):(i(),c(r,{key:1,class:"mx-0",size:"small",variant:"outlined",color:"#1E7D30",onClick:h(E,["stop"]),height:"32px",width:"120px"},{default:e(()=>[o(d,{size:"22",color:"#1E7D30",class:"mr-2"},{default:e(()=>[t("mdi-cloud-upload-outline")]),_:1}),me]),_:1},8,["onClick"]))])])]),_:1},8,["headers","items","loading"]),o(C,{class:"mx-0 my-0",style:{"justify-content":"flex-end"}},{default:e(()=>[o(r,{size:"small",color:"#1E7D30","prepend-icon":"mdi-plus",class:"mx-0",onClick:h(I,["stop"])},{default:e(()=>[t(" Thêm giấy tờ khác ")]),_:1},8,["onClick"])]),_:1})]),_:1}),s("input",{type:"file",id:"file_upload_tep_dinh_kem",multiple:!1,onInput:l[1]||(l[1]=a=>F()),style:{display:"none"}},null,32)]),_:1}),o(ie,{"max-width":"900",modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=a=>y.value=a),persistent:"",absolute:""},{default:e(()=>[o(M,null,{default:e(()=>[o(te,{dark:"",color:g.value,class:"px-0"},{default:e(()=>[o(ae,{class:"sub-header d-flex align-center justify-start py-0 px-0"},{default:e(()=>[_e,ye]),_:1}),o(ne),o(se,null,{default:e(()=>[o(r,{variant:"flat",size:"small",icon:"",color:"#E9FFF2",onClick:l[2]||(l[2]=a=>y.value=!1)},{default:e(()=>[o(d,{size:"20"},{default:e(()=>[t("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["color"]),o(oe,{class:"mt-2 px-3"},{default:e(()=>[o(de,{ref_key:"formGiayToKhac",ref:x,"lazy-validation":"",class:"py-0"},{default:e(()=>[o(q,{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=a=>D.value=a),placeholder:"Nhập tên giấy tờ",dense:"","hide-details":"auto",class:"input-form",clearable:"",required:"",rules:[a=>a!==""&&a!==null&&a!==void 0||"Thông tin bắt buộc"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),o(le,{class:"justify-center pb-3 px-3"},{default:e(()=>[o(r,{size:"small",variant:"elevated",loading:k.value,disabled:k.value,color:g.value,"prepend-icon":"mdi-content-save",onClick:h(P,["stop"])},{default:e(()=>[t(" Đồng ý ")]),_:1},8,["loading","disabled","color","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},ze=ee(De,[["__scopeId","data-v-83d9d108"]]);export{ze as default};
