import{e as rt,A as i,z as it,x as ht,f as dt,_ as pt,M as O,h as yt,y as _t,B as ft,C as gt,o as vt,r as Tt,i as l,j as p,w as t,l as y,d as s,k as u,F as h,q as A,O as Z,t as g,v as c,D as _,G as v,I as St,H as mt,J as kt,E as S,n as H,s as tt,W as et,X as C,Y as M,K as wt,L as Ct}from"./index-fe848f2d.js";import{u as Mt}from"./hosodvc-bdbcb3b1.js";import{j as at}from"./mock-data-857946d4.js";import{_ as xt}from"./_plugin-vue_export-helper-c27b6911.js";import{V as P,a as I}from"./VRow-09778906.js";import{V as Dt}from"./VCard-8b59fd30.js";import"./jquery-da988d60.js";const T=$=>(wt("data-v-76a0820d"),$=$(),Ct(),$),bt=T(()=>u("div",{class:"header-content",style:{"text-transform":"uppercase"}}," Danh sách hồ sơ ",-1)),Et=T(()=>u("div",{class:"triangle-header"},null,-1)),Ot={class:"text-sub-header pl-2",style:{"text-transform":"uppercase"}},Pt=T(()=>u("span",{style:{"padding-top":"2px"}},"Thêm mới hồ sơ",-1)),It=T(()=>u("div",{class:"header-content",style:{"text-transform":"uppercase"}}," Danh sách hồ sơ ",-1)),$t=T(()=>u("div",{class:"triangle-header"},null,-1)),zt=["onClick"],Ft=["width"],Nt={key:0},Lt={class:"text-sub-header mx-0 px-0 mb-2",style:{"text-transform":"uppercase"}},Vt=T(()=>u("span",null,"Số lượng hồ sơ: ",-1)),At=T(()=>u("span",{style:{"padding-top":"2px"}},"Thêm mới hồ sơ",-1)),Kt=["onClick"],Rt={class:"td-center"},Bt={class:"pt-2"},Gt={class:"mb-1",style:{color:"#1E7D30"}},jt={class:"mb-1"},Ut=T(()=>u("span",null,"Mã hồ sơ: ",-1)),Xt={class:"mb-1"},Yt=T(()=>u("span",null,"Ngày tạo: ",-1)),qt={style:{color:"#1E7D30"}},Wt={class:"mb-1"},Jt=T(()=>u("span",null,"Trạng thái: ",-1)),Qt={style:{color:"#1E7D30"}},Zt={width:"30"},Ht={__name:"DanhSachHoSo",setup($){const{mobile:z}=rt(),K=Mt(),m=i("#1E7D30"),x=it(),D=ht(),G=dt(()=>pt(()=>import("./Pagination-9b4bec97.js"),["./Pagination-9b4bec97.js","./VRow-09778906.js","./index-fe848f2d.js","./index-b7d1aa86.css","./VRow-37f80755.css","./VAutocomplete-2fe2a3ce.js","./VAutocomplete-af217798.css"],import.meta.url)),R=O(at.menuHoSo),f=yt(),{cookies:ot}=_t(),r=ft(()=>f.getMenuSelected);if(x&&x.params.hasOwnProperty("thutuc")&&x.params.thutuc){let o=R.find(function(n){return n.to.split("/")[1]===x.params.thutuc});f.SET_MENU_SELECTED(o)}else if(x.name=="ThongBao"){let o=R.find(function(n){return n.id==="thongbao"});f.SET_MENU_SELECTED(o)}else f.SET_MENU_SELECTED(R[0]);i(!1),O({required:o=>!!o&&!Array.isArray(o)||Array.isArray(o)&&o.length||"Thông tin bắt buộc"}),i(""),i(""),i(!1),i(!1),i(null),i(null),O({}),i({}),O([]);const st=O([{sortable:!1,title:"STT",align:"center",key:"stt",type:"index",class:"td-center",width:30},{sortable:!1,title:"Thông tin hồ sơ",align:"left",key:"MaDinhDanh",class:"td-left"},{sortable:!1,title:" ",align:"center",key:"action",width:30}]),F=i([]),k=i(20),B=i(!1);i(!1);const N=i(0),w=i(0),b=i(0),j=function(){let o=at.thuTucHanhChinh.find(function(n){return n.maThuTuc==r.value.thuTuc.maThuTuc});o&&o.thongTinHoSo&&(f.$patch(n=>{n.thongTinHoSo=Object.assign(o.thongTinHoSo,{TrangThaiDuLieu:{MaMuc:"01",TenMuc:"Sơ bộ"},DonViXuLy:{MaDinhDanh:"G01.105",TenGoi:"Cục An ninh mạng và phòng, chống tội phạm sử dụng công nghệ cao"},TrichYeuHoSo:o.tenThuTuc})}),D.push({path:`/nop-ho-so${r.value.to}/0`}))},L=function(){if(r.value&&r.value.thuTuc&&r.value.thuTuc.maThuTuc){let o=r.value.hasOwnProperty("thuTucThayDoi")?r.value.thuTuc.maThuTuc+","+r.value.thuTucThayDoi.maThuTuc:r.value.thuTuc.maThuTuc,n={params:{page:N.value,size:k.value,thuTucHanhChinh_MaMuc:o,trangThaiDuLieu_MaMuc:"01,02"}};B.value=!0,K.getDanhSachHoSo(n).then(function(d){B.value=!1,F.value=d.content,b.value=d.totalElements,w.value=d.totalPages}).catch(function(){B.value=!1,F.value=[],b.value=0,w.value=0})}};L();const U=function(o){D.push({path:"/thong-tin-ho-so/"+o.primKey})},X=function(o){D.push({path:`/nop-ho-so${r.value.to}/${o.primKey}`})},Y=function(o){f.SET_SHOWCONFIRM(!0);let n={auth:!1,title:"Xóa hồ sơ",message:"Bạn có chắc chắn muốn xóa hồ sơ này",button:{yes:"Có",no:"Không"},callback:()=>{let d={data:o};K.xoaHoSo(d).then(function(a){L()}).catch(function(){})}};f.SET_CONFIG_CONFIRM_DIALOG(n)},q=function(o){f.SET_SHOWCONFIRM(!0);let n={auth:!1,title:"Xóa hồ sơ",message:"Bạn có chắc chắn muốn rút hồ sơ này",button:{yes:"Có",no:"Không"},callback:()=>{let d={data:Object.assign(o,{TrangThaiHoSo:{MaMuc:"08",TenMuc:"Dừng xử lý"}})};K.capNhatHoSo(d).then(function(a){L()}).catch(function(){})}};f.SET_CONFIG_CONFIRM_DIALOG(n)},W=function(o){D.push({path:`/nop-ho-so${r.value.to}/${o.primKey}`,query:{id_update:o.primKey}})},J=function(o){console.log("page_pagination",o)},nt=function(o){if(!o)return"";let n=new Date(o);return`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()}`},lt=function(o){return o?(o/1).toFixed(0).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):""},Q=function(o){let n=new Date(o);return`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`},ut=function(o,n){let d="";return n&&(d=Array.from(n,function(a){return a[o.mapping]})),d=d.toString().replace(/,/g,", "),d};return gt(r,async o=>{L()}),vt(()=>{ot.get("Token")?f.SET_ISSIGNED(!0):(f.SET_ISSIGNED(!1),f.SET_USERINFO(""),D.push({path:"/login"}))}),(o,n)=>{const d=Tt("v-data-table");return l(),p(Dt,{class:"mx-auto pa-0",style:{"box-shadow":"none !important",overflow:"inherit"}},{default:t(()=>[y(z)?_("",!0):(l(),p(P,{key:0,class:"my-0 mb-5 mx-0"},{default:t(()=>[s(I,{class:"row-header d-flex align-center justify-start py-0 px-0",style:{border:"none"}},{default:t(()=>[bt,Et,u("div",Ot,h(y(r).dossierName),1)]),_:1}),s(A,{size:"small",color:m.value,onClick:Z(j,["stop"]),class:"mx-0"},{default:t(()=>[s(g,{size:"20",class:"mr-2"},{default:t(()=>[c("mdi-plus")]),_:1}),Pt]),_:1},8,["color","onClick"])]),_:1})),y(z)?(l(),p(P,{key:1,class:"my-0 mb-5 mx-0"},{default:t(()=>[s(I,{class:"row-header d-flex align-center justify-start py-0 px-0",style:{border:"none"}},{default:t(()=>[It,$t]),_:1})]),_:1})):_("",!0),y(z)?_("",!0):(l(),p(P,{key:2,class:"mx-0 my-0"},{default:t(()=>[s(I,{cols:"12",class:"px-0 py-0"},{default:t(()=>[s(d,{headers:y(r).headerTable,items:F.value,"items-per-page":k.value,"onUpdate:itemsPerPage":n[0]||(n[0]=a=>k.value=a),"item-value":"primKey","hide-default-footer":"",class:"table-base","no-data-text":"Không có hồ sơ nào"},{item:t(({item:a,index:V})=>[u("tr",{onClick:e=>U(a.raw)},[(l(!0),v(St,null,mt(y(r).headerTable,(e,ct)=>(l(),v("td",{key:ct,class:kt(e.class),width:e.hasOwnProperty("width")?e.width:""},[e.type=="index"?(l(),v("div",Nt,[k.value?(l(),v("div",{key:0,style:S(e.hasOwnProperty("style")?e.style:"")},h(V+1),5)):(l(),v("div",{key:1,style:S(e.hasOwnProperty("style")?e.style:"")},h(V+1),5))])):e.type=="date"?(l(),v("div",{key:1,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw.hasOwnProperty(e.key)?nt(a.raw[e.key]):""),5)):e.type=="datetime"?(l(),v("div",{key:2,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw.hasOwnProperty(e.key)?Q(a.raw[e.key]):""),5)):e.type=="object"?(l(),v("div",{key:3,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw.hasOwnProperty(e.key)?a.raw[e.key][e.mapping]:""),5)):e.type=="money"?(l(),v("div",{key:4,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw.hasOwnProperty(e.key)?lt(a.raw[e.key]):""),5)):e.type=="array"?(l(),v("div",{key:5,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw.hasOwnProperty(e.key)?ut(e,a.raw[e.key]):""),5)):e.type=="action"?(l(),v("div",{key:6,style:S(e.hasOwnProperty("style")?e.style:"")},[s(H,null,{activator:t(({props:E})=>[s(A,tt({icon:"",variant:"flat",size:"small"},E),{default:t(()=>[s(g,{size:"24",color:m.value},{default:t(()=>[c("mdi-filter-variant")]),_:1},8,["color"])]),_:2},1040)]),default:t(()=>[s(et,null,{default:t(()=>[a.raw.TrangThaiHoSo.MaMuc==""?(l(),p(C,{key:0,onClick:E=>X(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"24",color:m.value,class:"mr-2"},{default:t(()=>[c("mdi-playlist-edit")]),_:1},8,["color"]),c(" Sửa hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc==""?(l(),p(C,{key:1,onClick:E=>Y(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"22",color:"#FF0000",class:"mr-2"},{default:t(()=>[c("mdi-close")]),_:1}),c(" Xóa hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc=="01"?(l(),p(C,{key:2,onClick:E=>q(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"22",color:"#FF0000",class:"mr-2"},{default:t(()=>[c("mdi-file-refresh-outline")]),_:1}),c("Rút hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc=="10"&&(y(r).id=="xulydulieu"||y(r).id=="chuyendulieu")?(l(),p(C,{key:3,onClick:E=>W(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"20",color:m.value,class:"mr-2"},{default:t(()=>[c("mdi-file-document-plus-outline")]),_:1},8,["color"]),c(" Lập hồ sơ thay đổi ")]),_:1})]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)],4)):(l(),v("div",{key:7,style:S(e.hasOwnProperty("style")?e.style:"")},h(a.raw[e.key]),5))],10,Ft))),128))],8,zt)]),_:1},8,["headers","items","items-per-page"]),w.value&&w.value>1?(l(),p(y(G),{key:0,pageInput:N.value+1,pageCount:w.value,total:b.value,onChangePage:J,style:{"margin-bottom":"50px"}},null,8,["pageInput","pageCount","total"])):_("",!0)]),_:1})]),_:1})),y(z)?(l(),p(P,{key:3,class:"mx-0 my-0"},{default:t(()=>[s(I,{cols:"12",class:"px-0 py-0"},{default:t(()=>[u("div",Lt,h(y(r).dossierName),1),s(P,{class:"mx-0 my-0",style:{"justify-content":"flex-end"}},{default:t(()=>[s(I,{class:"px-0 py-0 pt-1",style:{"font-weight":"600",color:"#1E7D30"}},{default:t(()=>[Vt,u("span",null,h(b.value),1)]),_:1}),s(A,{size:"small",color:m.value,onClick:Z(j,["stop"]),class:"mx-0 mb-2"},{default:t(()=>[s(g,{size:"18",class:""},{default:t(()=>[c("mdi-plus")]),_:1}),At]),_:1},8,["color","onClick"])]),_:1}),s(d,{headers:st,items:F.value,"items-per-page":k.value,"onUpdate:itemsPerPage":n[1]||(n[1]=a=>k.value=a),"item-value":"primKey","hide-default-footer":"",class:"table-base","no-data-text":"Không có hồ sơ nào"},{item:t(({item:a,index:V})=>[u("tr",{onClick:e=>U(a.raw)},[u("td",Rt,[u("div",null,h((N.value+1)*k.value-k.value+V+1),1)]),u("td",Bt,[u("div",Gt,h(a.raw.MaDinhDanh),1),u("div",jt,[Ut,c(h(a.raw.MaDinhDanh),1)]),u("div",Xt,[Yt,u("span",qt,h(Q(a.raw.ThoiGianTao)),1)]),u("div",Wt,[Jt,u("span",Qt,h(a.raw.TrangThaiHoSo.TenMuc),1)])]),u("td",Zt,[s(H,null,{activator:t(({props:e})=>[s(A,tt({icon:"",variant:"flat",size:"small"},e),{default:t(()=>[s(g,{size:"24",color:m.value},{default:t(()=>[c("mdi-filter-variant")]),_:1},8,["color"])]),_:2},1040)]),default:t(()=>[s(et,null,{default:t(()=>[a.raw.TrangThaiHoSo.MaMuc==""?(l(),p(C,{key:0,onClick:e=>X(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"24",color:m.value,class:"mr-2"},{default:t(()=>[c("mdi-playlist-edit")]),_:1},8,["color"]),c(" Sửa hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc==""?(l(),p(C,{key:1,onClick:e=>Y(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"22",color:"#FF0000",class:"mr-2"},{default:t(()=>[c("mdi-close")]),_:1}),c(" Xóa hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc=="01"?(l(),p(C,{key:2,onClick:e=>q(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"22",color:"#FF0000",class:"mr-2"},{default:t(()=>[c("mdi-file-refresh-outline")]),_:1}),c("Rút hồ sơ ")]),_:1})]),_:2},1032,["onClick"])):_("",!0),a.raw.TrangThaiHoSo.MaMuc=="10"&&(y(r).id=="xulydulieu"||y(r).id=="chuyendulieu")?(l(),p(C,{key:3,onClick:e=>W(a.raw)},{default:t(()=>[s(M,null,{default:t(()=>[s(g,{size:"20",color:m.value,class:"mr-2"},{default:t(()=>[c("mdi-file-document-plus-outline")]),_:1},8,["color"]),c(" Lập hồ sơ thay đổi ")]),_:1})]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)])],8,Kt)]),_:1},8,["headers","items","items-per-page"]),w.value&&w.value>1?(l(),p(y(G),{key:0,pageInput:N.value+1,pageCount:w.value,total:b.value,onChangePage:J,style:{"margin-bottom":"50px"}},null,8,["pageInput","pageCount","total"])):_("",!0)]),_:1})]),_:1})):_("",!0)]),_:1})}}},ue=xt(Ht,[["__scopeId","data-v-76a0820d"]]);export{ue as default};
