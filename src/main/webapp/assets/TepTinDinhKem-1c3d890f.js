import{e as oe,A as f,h as le,B as te,M as U,o as ne,r as ie,i,F as w,d as o,w as a,l as C,j as d,k as t,v as n,G as D,E as y,q as h,O as _,t as s,s as z,N as se,I as ue,K as de,L as ce}from"./index-012aba98.js";import{$ as re}from"./jquery-da988d60.js";import{u as pe}from"./hosodvc-33b4207f.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A,a as O}from"./VRow-d6ac88c9.js";import{V as S}from"./VTooltip-0e94ffab.js";import{V as M,a as X,b as fe}from"./VCard-56b1f699.js";import{V as R,a as q,b as Q,c as W}from"./VToolbarItems-355b3c6f.js";import{V as Te}from"./VForm-0a6600ff.js";const p=k=>(de("data-v-2ca49019"),k=k(),ce(),k),_e={class:"align-left"},me={key:0,style:{color:"red"}},De=p(()=>t("span",{style:{"font-size":"14px","text-transform":"none"}},"Xóa",-1)),ge={class:"align-left",width:"350"},ye=["onClick"],ve={class:"ml-2",style:{"font-size":"14px","text-decoration":"underline",color:"#1E7D30"}},we=p(()=>t("span",null,"Tải xuống",-1)),ke=p(()=>t("span",null,"Xóa",-1)),xe=p(()=>t("span",{style:{"font-size":"14px","text-transform":"none"}},"Tải lên tệp",-1)),be={class:"align-center",width:"30"},Ce={class:"align-left"},ze={class:"pt-1"},Se={key:0,style:{color:"red"}},Le=p(()=>t("span",{style:{"font-size":"14px","text-transform":"none"}},"Xóa",-1)),Ve=["onClick"],He={class:"ml-2",style:{"font-size":"14px","text-decoration":"underline",color:"#1E7D30"}},Me=p(()=>t("span",null,"Tải xuống",-1)),Ke=p(()=>t("span",null,"Xóa",-1)),Ee=p(()=>t("span",{style:{"font-size":"14px","text-transform":"none"}},"Tải lên tệp",-1)),Ge=p(()=>t("div",{class:"sub-header-content"}," Tên giấy tờ ",-1)),Pe=p(()=>t("div",{class:"triangle-header"},null,-1)),$e=p(()=>t("div",{class:"sub-header-content"}," Tệp tin đính kèm ",-1)),Fe=p(()=>t("div",{class:"triangle-header"},null,-1)),Ie=["src"],Be={__name:"TepTinDinhKem",props:{permission:{type:Boolean,default:!1}},setup(k){const{mobile:K}=oe(),v=f("#1E7D30"),m=le(),E=pe(),G=f(!1),L=f(!1),x=f(!1),P=f(""),V=f(""),$=f(null),g=f(!1),F=te(function(){return m.thongTinHoSo.ThanhPhanHoSo.filter(function(u){return!u.MaThanhPhanHoSo||u.MaThanhPhanHoSo&&u.MaThanhPhanHoSo.MaMuc.split("_")[0]!=="BMDT"})}),J=f(null),I=f(null),Y=U([{sortable:!1,title:"Tên giấy tờ",align:"left",key:"tenGiayTo",class:"td-left"},{sortable:!1,title:"Tệp đính kèm",align:"left",key:"tepDinhKem",class:"td-left"}]),Z=U([{sortable:!1,title:"TT",align:"center",key:"index",class:"td-left"},{sortable:!1,title:"Tên giấy tờ",align:"left",key:"tepDinhKem",class:"td-left"}]),B=function(u,l){J.value=u,I.value=l,document.getElementById("file_upload_tep_dinh_kem").value="",document.getElementById("file_upload_tep_dinh_kem").click()},ee=function(){let u=re("#file_upload_tep_dinh_kem")[0].files[0];E.uploadTep(u).then(function(l){m.$patch(c=>{c.thongTinHoSo.ThanhPhanHoSo[I.value+1].TepDuLieu=l.resp}),console.log("thongTinHoSo",m.thongTinHoSo)}).catch(function(l){console.log(l)})},b=function(u,l){g.value||(g.value=!0,E.taiTep(u).then(function(c){if(g.value=!1,l=="preview")P.value=c,x.value=!0;else{var e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=c,e.download=u.TenTep,e.click()}}).catch(function(c){g.value=!1}))},N=function(u,l){m.$patch(c=>{c.thongTinHoSo.ThanhPhanHoSo[l+1].TepDuLieu={DinhDangTep:"",DuongDanURL:"",Ext:"unknown",KichThuocTep:0,MaDinhDanh:"",TenTep:""}})},j=function(u,l){console.log("item",u,l),m.SET_SHOWCONFIRM(!0);let c={auth:!1,title:"Xóa giấy tờ",message:"Bạn có chắc chắn muốn xóa giấy tờ này",button:{yes:"Có",no:"Không"},callback:()=>{m.$patch(e=>{e.thongTinHoSo.ThanhPhanHoSo.splice(l+1,1)})}};m.SET_CONFIG_CONFIRM_DIALOG(c)},ae=async function(){const{valid:u}=await $.value.validate();if(u){let l={IDGiayTo:"",TenGiayTo:V.value,SoBanGiay:0,HinhThucGiayTo:{MaMuc:"",TenMuc:""},NgayBoSung:null,MaThanhPhanHoSo:null,MaGiayToKetQua:null,DaHuyBoThayThe:!1,TinhTrangSoHoa:1,GiayToCaNhanToChuc:{MaDinhDanh:"",TenGiayTo:""},TepDuLieu:{MaDinhDanh:"",TenTep:"",DinhDangTep:"",KichThuocTep:0,DuongDanURL:"",Ext:""},GiayToLuuTruSo:{MaDinhDanh:"",TenGiayTo:""},DuLieuDienTu:{MaDinhDanh:""}};console.log("tphsAdd",l),m.$patch(c=>{c.thongTinHoSo.ThanhPhanHoSo.push(l)})}};return ne(()=>{}),(u,l)=>{const c=ie("v-data-table");return i(),w(ue,null,[o(M,{class:"pa-0 thanhphanhoso",style:{"box-shadow":"none !important",width:"100%"}},{default:a(()=>[C(K)?y("",!0):(i(),d(A,{key:0,class:"mx-0 my-0 mt-2"},{default:a(()=>[o(c,{headers:Y,items:C(F),"items-per-page":"20","item-value":"PrimKey","hide-default-footer":"",class:"table-base mb-5","no-data":"Không có dữ liệu",loading:G.value,"loading-text":"Đang tải... "},{item:a(({item:e,index:T})=>[t("tr",null,[t("td",_e,[n(D(T+1)+". "+D(e.raw.TenGiayTo)+" ",1),e.raw.MaThanhPhanHoSo?(i(),w("span",me,"(*)")):y("",!0),e.raw.MaThanhPhanHoSo?y("",!0):(i(),d(h,{key:1,class:"mx-0 ml-2",size:"small",variant:"outlined",color:"red",onClick:_(r=>j(e.raw,T),["stop"]),height:"28px",width:"50px"},{default:a(()=>[o(s,{size:"14",color:"red"},{default:a(()=>[n("mdi-delete")]),_:1}),De]),_:2},1032,["onClick"]))]),t("td",ge,[e.raw.TepDuLieu.KichThuocTep?(i(),w("div",{key:0,class:"py-1",onClick:r=>b(e.raw.TepDuLieu,"preview")},[e.raw.TepDuLieu.DinhDangTep==="xls"||e.raw.TepDuLieu.DinhDangTep==="xlsx"?(i(),d(s,{key:0,size:"18",color:"green"},{default:a(()=>[n("mdi-file-excel-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="doc"||e.raw.TepDuLieu.DinhDangTep==="docx"?(i(),d(s,{key:1,size:"18",color:"blue"},{default:a(()=>[n("mdi-file-word-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="pdf"?(i(),d(s,{key:2,size:"18",color:"red"},{default:a(()=>[n("mdi-file-pdf-box")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="png"||e.raw.TepDuLieu.DinhDangTep==="jpg"||e.raw.TepDuLieu.DinhDangTep==="jpeg"?(i(),d(s,{key:3,size:"18",color:"blue"},{default:a(()=>[n("mdi-file-image")]),_:1})):(i(),d(s,{key:4,size:"18",color:"#2161b1"},{default:a(()=>[n("mdi-paperclip")]),_:1})),t("a",ve,D(e.raw.TepDuLieu.TenTep)+"."+D(e.raw.TepDuLieu.Ext),1),o(S,{location:"top"},{activator:a(({props:r})=>[o(h,z({icon:"",variant:"flat",size:"small"},r,{class:"mr-2",onClick:_(H=>b(e.raw.TepDuLieu,"download"),["stop"])}),{default:a(()=>[o(s,{size:"18",color:v.value},{default:a(()=>[n("mdi-cloud-download-outline")]),_:1},8,["color"])]),_:2},1040,["onClick"])]),default:a(()=>[we]),_:2},1024),o(S,{location:"top"},{activator:a(({props:r})=>[o(h,z({icon:"",variant:"flat",size:"small"},r,{class:"mr-2",onClick:_(H=>N(e.raw,T),["stop"])}),{default:a(()=>[o(s,{size:"18",color:"red"},{default:a(()=>[n("mdi-close")]),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[ke]),_:2},1024)],8,ye)):(i(),d(h,{key:1,class:"mx-0",size:"small",variant:"outlined",color:"#1E7D30",onClick:_(r=>B(e.raw,T),["stop"]),height:"32px",width:"120px"},{default:a(()=>[o(s,{size:"22",color:"#1E7D30",class:"mr-2"},{default:a(()=>[n("mdi-cloud-upload-outline")]),_:1}),xe]),_:2},1032,["onClick"]))])])]),_:1},8,["headers","items","loading"])]),_:1})),C(K)?(i(),d(A,{key:1,class:"mx-0 my-0 mt-2"},{default:a(()=>[o(c,{headers:Z,items:C(F),"items-per-page":"20","item-value":"PrimKey","hide-default-footer":"",class:"table-base mb-5","no-data":"Không có dữ liệu",loading:G.value,"loading-text":"Đang tải... "},{item:a(({item:e,index:T})=>[t("tr",null,[t("td",be,D(T+1),1),t("td",Ce,[t("div",ze,[n(D(e.raw.TenGiayTo)+" ",1),e.raw.MaThanhPhanHoSo?(i(),w("span",Se,"(*)")):y("",!0),e.raw.MaThanhPhanHoSo?y("",!0):(i(),d(h,{key:1,class:"mx-0 ml-2",size:"small",variant:"outlined",color:"red",onClick:_(r=>j(e.raw,T),["stop"]),height:"28px",width:"50px"},{default:a(()=>[o(s,{size:"14",color:"red"},{default:a(()=>[n("mdi-delete")]),_:1}),Le]),_:2},1032,["onClick"]))]),t("div",null,[e.raw.TepDuLieu.KichThuocTep?(i(),w("div",{key:0,class:"py-1",onClick:r=>b(e.raw.TepDuLieu,"preview")},[e.raw.TepDuLieu.DinhDangTep==="xls"||e.raw.TepDuLieu.DinhDangTep==="xlsx"?(i(),d(s,{key:0,size:"18",color:"green"},{default:a(()=>[n("mdi-file-excel-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="doc"||e.raw.TepDuLieu.DinhDangTep==="docx"?(i(),d(s,{key:1,size:"18",color:"blue"},{default:a(()=>[n("mdi-file-word-outline")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="pdf"?(i(),d(s,{key:2,size:"18",color:"red"},{default:a(()=>[n("mdi-file-pdf-box")]),_:1})):e.raw.TepDuLieu.DinhDangTep==="png"||e.raw.TepDuLieu.DinhDangTep==="jpg"||e.raw.TepDuLieu.DinhDangTep==="jpeg"?(i(),d(s,{key:3,size:"18",color:"blue"},{default:a(()=>[n("mdi-file-image")]),_:1})):(i(),d(s,{key:4,size:"18",color:"#2161b1"},{default:a(()=>[n("mdi-paperclip")]),_:1})),t("a",He,D(e.raw.TepDuLieu.TenTep)+"."+D(e.raw.TepDuLieu.Ext),1),o(S,{location:"top"},{activator:a(({props:r})=>[o(h,z({icon:"",variant:"flat",size:"small"},r,{class:"mr-2",onClick:_(H=>b(e.raw.TepDuLieu,"download"),["stop"])}),{default:a(()=>[o(s,{size:"18",color:v.value},{default:a(()=>[n("mdi-cloud-download-outline")]),_:1},8,["color"])]),_:2},1040,["onClick"])]),default:a(()=>[Me]),_:2},1024),o(S,{location:"top"},{activator:a(({props:r})=>[o(h,z({icon:"",variant:"flat",size:"small"},r,{class:"mr-2",onClick:_(H=>N(e.raw,T),["stop"])}),{default:a(()=>[o(s,{size:"18",color:"red"},{default:a(()=>[n("mdi-close")]),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[Ke]),_:2},1024)],8,Ve)):(i(),d(h,{key:1,class:"mx-0",size:"small",variant:"outlined",color:"#1E7D30",onClick:_(r=>B(e.raw,T),["stop"]),height:"28px",width:"80px"},{default:a(()=>[o(s,{size:"22",color:"#1E7D30",class:"mr-2"},{default:a(()=>[n("mdi-cloud-upload-outline")]),_:1}),Ee]),_:2},1032,["onClick"]))])])])]),_:1},8,["headers","items","loading"])]),_:1})):y("",!0),t("input",{type:"file",id:"file_upload_tep_dinh_kem",multiple:!1,onInput:l[0]||(l[0]=e=>ee()),style:{display:"none"}},null,32)]),_:1}),o(W,{"max-width":"900",modelValue:L.value,"onUpdate:modelValue":l[3]||(l[3]=e=>L.value=e),persistent:"",absolute:""},{default:a(()=>[o(M,null,{default:a(()=>[o(R,{dark:"",color:v.value,class:"px-0"},{default:a(()=>[o(O,{class:"sub-header d-flex align-center justify-start py-0 px-0"},{default:a(()=>[Ge,Pe]),_:1}),o(q),o(Q,null,{default:a(()=>[o(h,{variant:"flat",size:"small",icon:"",color:"#E9FFF2",onClick:l[1]||(l[1]=e=>L.value=!1)},{default:a(()=>[o(s,{size:"20"},{default:a(()=>[n("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["color"]),o(X,{class:"mt-2 px-3"},{default:a(()=>[o(Te,{ref_key:"formGiayToKhac",ref:$,"lazy-validation":"",class:"py-0"},{default:a(()=>[o(se,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),placeholder:"Nhập tên giấy tờ",dense:"","hide-details":"auto",class:"input-form",clearable:"",required:"",rules:[e=>e!==""&&e!==null&&e!==void 0||"Thông tin bắt buộc"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),o(fe,{class:"justify-center pb-3 px-3"},{default:a(()=>[o(h,{size:"small",variant:"elevated",loading:g.value,disabled:g.value,color:v.value,"prepend-icon":"mdi-content-save",onClick:_(ae,["stop"])},{default:a(()=>[n(" Đồng ý ")]),_:1},8,["loading","disabled","color","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(W,{"max-width":"1000",modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e),persistent:""},{default:a(()=>[o(M,null,{default:a(()=>[o(R,{dark:"",color:v.value,class:"px-0"},{default:a(()=>[o(O,{class:"sub-header d-flex align-center justify-start py-0 px-0"},{default:a(()=>[$e,Fe]),_:1}),o(q),o(Q,null,{default:a(()=>[o(h,{variant:"flat",size:"small",icon:"",color:"#E9FFF2",onClick:l[4]||(l[4]=e=>x.value=!1)},{default:a(()=>[o(s,{size:"20"},{default:a(()=>[n("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["color"]),o(X,{class:"my-0 px-0 py-0"},{default:a(()=>[t("iframe",{src:P.value,type:"application/pdf",width:"100%",height:"100%",style:{overflow:"auto","min-height":"600px"},frameborder:"0"},`\r
        `,8,Ie)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},We=he(Be,[["__scopeId","data-v-2ca49019"]]);export{We as default};
